<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Prediction components are a functional decomposition of the model prediction.
The sum of all components equals the overall predicted value for an observation."><title>Extract predicted components from a Random Planted Forest — predict_components • randomPlantedForest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract predicted components from a Random Planted Forest — predict_components"><meta property="og:description" content="Prediction components are a functional decomposition of the model prediction.
The sum of all components equals the overall predicted value for an observation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">randomPlantedForest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/PlantedML/randomPlantedForest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract predicted components from a Random Planted Forest</h1>
      <small class="dont-index">Source: <a href="https://github.com/PlantedML/randomPlantedForest/blob/HEAD/R/predict_components.R" class="external-link"><code>R/predict_components.R</code></a></small>
      <div class="d-none name"><code>predict_components.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prediction components are a functional decomposition of the model prediction.
The sum of all components equals the overall predicted value for an observation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predict_components</span><span class="op">(</span><span class="va">object</span>, <span class="va">new_data</span>, max_interaction <span class="op">=</span> <span class="cn">NULL</span>, predictors <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>A fit object of class <code><a href="rpf.html">rpf</a></code>.</p></dd>


<dt>new_data</dt>
<dd><p>Data for new observations to predict.</p></dd>


<dt>max_interaction</dt>
<dd><p><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> or <code>NULL</code>: Maximum degree of interactions to consider.
Default will use the <code>max_interaction</code> parameter from the <code><a href="rpf.html">rpf</a></code> object.
Must be between <code>1</code> (main effects only) and the <code>max_interaction</code> of the <code><a href="rpf.html">rpf</a></code> object.</p></dd>


<dt>predictors</dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> or <code>NULL</code>: Vector of one or more column names of predictor variables
in <code>new_data</code> to extract components for.
If <code>NULL</code>, all variables and their interactions are returned.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>list</code> with elements:</p><ul><li><p><code>m</code> (<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>): Components for each main effect and
interaction term, representing the functional decomposition of the prediction.
All components together with the intercept sum up
to the prediction.
For multiclass classification, the number of output columns is multiplied by
the number of levels in the outcome.</p></li>
<li><p><code>intercept</code> (<code>numeric(1)</code>): Expected value of the prediction.</p></li>
<li><p><code>x</code> (<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>): Copy of <code>new_data</code> containing predictors selected
by <code>predictors</code>.</p></li>
<li><p><code>target_levels</code> (<code>character</code>): For multiclass classification only: Vector of target levels
which can be used to disassemble <code>m</code>, as names include both term and target level.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Extracts all possible components up to <code>max_interaction</code> degrees,
up to the value set when calling <code><a href="rpf.html">rpf()</a></code>. The intercept is always included.
Optionally <code>predictors</code> can be specified to only include components including the given variables.
If <code>max_interaction</code> is greater than <code>length(predictors)</code>, the <code>max_interaction</code> will be lowered accordingly.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Depending on the number of predictors and <code>max_interaction</code>, the number of components will
increase drastically to <code>sum(choose(ncol(new_data), seq_len(max_interaction)))</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Regression task, only some predictors</span></span></span>
<span class="r-in"><span><span class="va">train</span> <span class="op">&lt;-</span>  <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span>  <span class="va">mtcars</span><span class="op">[</span><span class="fl">21</span><span class="op">:</span><span class="fl">32</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">23</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rpfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="rpf.html">rpf</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">train</span>, max_interaction <span class="op">=</span> <span class="fl">3</span>, ntrees <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract all components, including main effects and interaction terms up to `max_interaction`</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">components</span> <span class="op">&lt;-</span> <span class="fu">predict_components</span><span class="op">(</span><span class="va">rpfit</span>, <span class="va">test</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $m</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            cyl       disp         hp    cyl:disp      cyl:hp     disp:hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;      &lt;num&gt;      &lt;num&gt;       &lt;num&gt;       &lt;num&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  1.3171056  2.4939663  1.1179246 -0.01482717 -0.04027828 -0.42825535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: -0.8481770 -1.1761913  0.2848618  0.09476257  0.06668192  0.01536748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: -0.8481770 -1.1761913  0.2848618  0.09476257  0.06668192  0.01536748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: -0.8481770 -1.1761913 -3.4381764  0.09476257  0.06607252 -0.36467941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: -0.8481770 -1.3837212  0.1665770  0.09270936  0.08321648 -0.02961805</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  1.3171056  4.6572097  3.3746638  0.93009887  0.30303006  0.04533263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  1.3171056  2.4939663  3.3746638 -0.01482717  0.30303006 -0.19752497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  1.3171056  4.6572097  1.1318509  0.93009887 -0.35303353 -0.10831095</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: -0.8481770 -1.1761913 -3.4381764  0.09476257  0.06607252 -0.36467941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: -0.6441787  0.6437832  0.1665770  0.13550304  0.09153429 -0.24911970</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: -0.8481770 -1.1761913 -3.4381764  0.09476257  0.06607252 -0.36467941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  1.3171056  2.4939663  0.4186601 -0.01482717 -0.04027828 -0.27031439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      cyl:disp:hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: -0.046862620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:  0.009109767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:  0.009109767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:  0.084106744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:  0.008909305</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  0.077872127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  0.101920822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  0.011412415</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:  0.084106744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: -0.024506959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:  0.084106744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: -0.046862620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $intercept</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20.2796</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       cyl  disp    hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     4 120.1    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     8 318.0   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     8 304.0   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     8 350.0   245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     8 400.0   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     4  79.0    66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     4 120.3    91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     4  95.1   113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     8 351.0   264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     6 145.0   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     8 301.0   335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     4 121.0   109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "glex"           "rpf_components" "list"          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sums to prediction</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  m_sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">components</span><span class="op">$</span><span class="va">m</span><span class="op">)</span> <span class="op">+</span> <span class="va">components</span><span class="op">$</span><span class="va">intercept</span>,</span></span>
<span class="r-in"><span>  prediction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rpfit</span>, <span class="va">test</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       m_sum    .pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  24.67837 24.67837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  18.72601 18.72601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  18.72601 18.72601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  14.69731 14.69731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  18.36949 18.36949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  30.98491 30.98491</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  27.65793 27.65793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  27.86593 27.86593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  14.69731 14.69731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 20.39919 20.39919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 14.69731 14.69731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 24.13705 24.13705</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only get components with interactions of a lower degree, ignoring 3-way interactions</span></span></span>
<span class="r-in"><span><span class="fu">predict_components</span><span class="op">(</span><span class="va">rpfit</span>, <span class="va">test</span>, max_interaction <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $m</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            cyl       disp         hp    cyl:disp      cyl:hp     disp:hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;      &lt;num&gt;      &lt;num&gt;       &lt;num&gt;       &lt;num&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  1.3171056  2.4939663  1.1179246 -0.01482717 -0.04027828 -0.42825535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: -0.8481770 -1.1761913  0.2848618  0.09476257  0.06668192  0.01536748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: -0.8481770 -1.1761913  0.2848618  0.09476257  0.06668192  0.01536748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: -0.8481770 -1.1761913 -3.4381764  0.09476257  0.06607252 -0.36467941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: -0.8481770 -1.3837212  0.1665770  0.09270936  0.08321648 -0.02961805</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  1.3171056  4.6572097  3.3746638  0.93009887  0.30303006  0.04533263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  1.3171056  2.4939663  3.3746638 -0.01482717  0.30303006 -0.19752497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  1.3171056  4.6572097  1.1318509  0.93009887 -0.35303353 -0.10831095</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: -0.8481770 -1.1761913 -3.4381764  0.09476257  0.06607252 -0.36467941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: -0.6441787  0.6437832  0.1665770  0.13550304  0.09153429 -0.24911970</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: -0.8481770 -1.1761913 -3.4381764  0.09476257  0.06607252 -0.36467941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  1.3171056  2.4939663  0.4186601 -0.01482717 -0.04027828 -0.27031439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $intercept</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20.2796</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       cyl  disp    hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     4 120.1    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     8 318.0   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     8 304.0   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     8 350.0   245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     8 400.0   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     4  79.0    66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     4 120.3    91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     4  95.1   113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     8 351.0   264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     6 145.0   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     8 301.0   335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     4 121.0   109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $remainder</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.046862620  0.009109767  0.009109767  0.084106744  0.008909305</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6]  0.077872127  0.101920822  0.011412415  0.084106744 -0.024506959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11]  0.084106744 -0.046862620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "glex"           "rpf_components" "list"          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only retrieve main effects</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">main_effects</span> <span class="op">&lt;-</span> <span class="fu">predict_components</span><span class="op">(</span><span class="va">rpfit</span>, <span class="va">test</span>, max_interaction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $m</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            cyl       disp         hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;      &lt;num&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  1.3171056  2.4939663  1.1179246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: -0.8481770 -1.1761913  0.2848618</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: -0.8481770 -1.1761913  0.2848618</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: -0.8481770 -1.1761913 -3.4381764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: -0.8481770 -1.3837212  0.1665770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  1.3171056  4.6572097  3.3746638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  1.3171056  2.4939663  3.3746638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  1.3171056  4.6572097  1.1318509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: -0.8481770 -1.1761913 -3.4381764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: -0.6441787  0.6437832  0.1665770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: -0.8481770 -1.1761913 -3.4381764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  1.3171056  2.4939663  0.4186601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $intercept</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20.2796</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       cyl  disp    hp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     4 120.1    97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     8 318.0   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     8 304.0   150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     8 350.0   245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     8 400.0   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     4  79.0    66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     4 120.3    91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     4  95.1   113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     8 351.0   264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     6 145.0   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     8 301.0   335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     4 121.0   109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $remainder</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.53022343  0.18592174  0.18592174 -0.11973758  0.15521709  1.35633369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  0.19259874  0.48016681 -0.11973758 -0.04658934 -0.11973758 -0.37228247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "glex"           "rpf_components" "list"          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The difference is the combined contribution of interaction effects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  m_sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">main_effects</span><span class="op">$</span><span class="va">m</span><span class="op">)</span> <span class="op">+</span> <span class="va">main_effects</span><span class="op">$</span><span class="va">intercept</span>,</span></span>
<span class="r-in"><span>  prediction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rpfit</span>, <span class="va">test</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       m_sum    .pred</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  25.20859 24.67837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  18.54009 18.72601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  18.54009 18.72601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  14.81705 14.69731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  18.21428 18.36949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  29.62858 30.98491</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  27.46533 27.65793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  27.38576 27.86593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  14.81705 14.69731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 20.44578 20.39919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 14.81705 14.69731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 24.50933 24.13705</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Joseph Theo Meyer, Munir Hiabu, Maike Spankus, Marvin N. Wright, Lukas Burk.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer></div>

  

  

  </body></html>

